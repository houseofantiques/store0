<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="page_title">بيت التحفيات | متجر التحف</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body data-page="store">
  <div class="overlay"></div>

  <div class="app">

    <!-- ✅ Topbar (مرة وحدة فقط) -->
    <header class="topbar">
      <div class="shell" style="padding-bottom:0;">
        <div class="topbarInner" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
          
          <div class="brand">
            <div class="mark">
              <img src="logo.png" alt="شعار بيت التحفيات">
            </div>

            <div class="brandText">
              <div class="brandName">متجر بيت التحفيات</div>
              <div class="brandSub">تراث يُقتنى، لا يُنسى</div>
            </div>
          </div>

          <div class="topActions">
            <button class="iconBtn" id="themeToggle" type="button" data-i18n-aria="theme_toggle" aria-label="تبديل المظهر">
              <span class="dot"></span>
            </button>

            <div class="langBox">
              <span class="langLabel" data-i18n="lang_label">اللغة</span>
              <select id="langSelect" class="langSelect" aria-label="Language">
                <option value="ar" data-i18n="lang_ar">AR</option>
                <option value="en" data-i18n="lang_en">EN</option>
                <option value="ku" data-i18n="lang_ku">KU</option>
              </select>
            </div>
          </div>

        </div>
      </div>
    </header>

    <div class="shell">

      <!-- Hero -->
      <section class="hero">
        <div class="heroText">
          <h1 data-i18n="hero_title">اقتني قطعة تروي تاريخ</h1>
          <p data-i18n="hero_desc">اكتشف تحفنا: سجاد، اكسسوارات، فضة، نحاس، أعمال فنية، كريستال...</p>

          <div class="searchRow">
            <input id="searchInput" class="searchInput" type="search" data-i18n-placeholder="search_placeholder" placeholder="ابحث باسم القطعة أو الكود..." />
            <div class="resultsCount" id="resultsCount">0 نتائج</div>
          </div>

          <div class="chipsHeader">
            <div class="chipsTitle" data-i18n="categories">التصنيفات</div>
          </div>
          <div class="chipsWrap" id="chipsWrap"></div>

          <div class="filtersRow">
            <div class="filter">
              <label class="filterLabel" for="sortSelect" data-i18n="sort_label">الترتيب</label>
              <select id="sortSelect" class="filterSelect">
                <option value="featured" data-i18n="sort_featured">مميز</option>
                <option value="newest" data-i18n="sort_newest">الأحدث</option>
                <option value="priceAsc" data-i18n="sort_price_asc">السعر: الأقل</option>
                <option value="priceDesc" data-i18n="sort_price_desc">السعر: الأعلى</option>
              </select>
            </div>

            <div class="filter">
              <label class="filterLabel" for="showSelect" data-i18n="show_label">عرض</label>
              <select id="showSelect" class="filterSelect">
                <option value="all" data-i18n="show_all">الكل</option>
                <option value="fav" data-i18n="show_favorites">المفضلة</option>
              </select>
            </div>
          </div>
        </div>

        <aside class="sidePanel">
          <div class="panelCard">
            <div class="panelTitle" data-i18n="auction_info">معلومات المزاد</div>

            <!-- ✅ زر تحكم (راح نخليه يشتغل بالـ JS) -->
            <div class="panelNotes" style="margin-top:10px;">
              <button class="btn ghost" type="button" id="auctionToggleBtn" data-i18n="auction_toggle_btn">
                إظهار/إخفاء قسم المزاد
              </button>
            </div>

            <!-- ✅ نغلف كل شيء خاص بالمزاد هنا حتى نخفيه/نظهره -->
            <div id="auctionBlock">

              <div class="kpis">
                <div class="kpi">
                  <div class="kpiNum" id="kpiStoreCount">0</div>
                  <div class="kpiLabel" data-i18n="store_items_count">قطع المتجر</div>
                </div>
                <div class="kpi">
                  <div class="kpiNum" id="kpiAuctionCount">0</div>
                  <div class="kpiLabel" data-i18n="auction_items_count">قطع المزاد القادم</div>
                </div>
              </div>

              <a class="btn primary" href="auction.html" data-i18n="view_auction">استعرض قطع المزاد</a>

              <div class="panelNotes">
                <div class="note" data-i18n="auction_note_1">يتم تحديث القطع المشاركة باستمرار</div>
                <div class="note" data-i18n="auction_note_2">قائمة المزاد تتحدث حسب تجهيز القطع.</div>
              </div>

            </div><!-- /auctionBlock -->
          </div>
        </aside>
      </section>

      <!-- ✅ Featured (NEW) -->
      <section class="featuredSection" id="featuredSection" style="display:none;">
        <h2 class="sectionTitle" data-i18n="featured_items">القطع المميزة</h2>

        <div id="featuredEmpty" class="emptyState" style="display:none;">
          <div class="emptyTitle" data-i18n="no_featured">لا توجد قطع مميزة حالياً</div>
          <div class="emptySub" data-i18n="featured_hint">يمكنك اختيار قطع كمميزة من ملف المنتجات.</div>
        </div>

        <!-- راح تنعرض القطع المميزة هنا بشكل مجاور -->
        <div class="featuredRow" id="featuredRow"></div>
      </section>

      <!-- Grid -->
      <section class="gridSection">
        <h2 class="sectionTitle" data-i18n="available_items">القطع المتاحة</h2>

        <div id="emptyState" class="emptyState" style="display:none;">
          <div class="emptyTitle" data-i18n="no_results">لا يوجد نتائج</div>
          <div class="emptySub" data-i18n="try_filter">جرّب تبدّيل التصنيف أو تقليل كلمات البحث.</div>
        </div>

        <div class="productsGrid" id="productsGrid"></div>
      </section>

      <!-- Footer -->
      <footer class="footer">
        <div class="footerBrand" data-i18n="footer_brand">بيت التحفيات</div>
        <div class="footerTag" data-i18n="footer_tagline">بغداد - أبو نؤاس / للذاكرة، للتوثيق، وللأثر</div>
      </footer>

    </div><!-- /shell -->

  </div><!-- /app -->


  <!-- ✅ Modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modalDialog" role="dialog" aria-modal="true">
      <button class="modalClose" id="modalClose" type="button" data-i18n="close">إغلاق</button>

      <!-- ✅ modal head -->
      <div class="modalHead">
        <div class="modalTitleRow">
          <h3 class="modalTitle" id="modalTitle">—</h3>
          <span class="badge auction" id="modalBadge" style="display:none;">مزاد</span>
        </div>

        <div class="modalMeta">
          <div class="metaLine"><span class="metaK" data-i18n="code_label">الكود</span> <span class="metaV" id="modalCode">—</span></div>
          <div class="metaLine"><span class="metaK" data-i18n="price_label">السعر</span> <span class="metaV" id="modalPrice">—</span></div>
          <div class="metaLine"><span class="metaK">Status</span> <span class="metaV" id="modalStatus">—</span></div>
        </div>
      </div><!-- /modalHead -->


      <!-- ✅ MODAL TOP (STICKY) -->
      <div id="modalTop" class="modalTop">
        <div class="item-dimensions">
          <strong>Dimensions:</strong>
          <span id="itemDimensions"></span>
        </div>

        <div class="modalTabs" role="tablist" aria-label="tabs">
          <button class="tab active" type="button" data-modal-tab="details" data-i18n="tab_details">تفاصيل</button>
          <button class="tab" type="button" data-modal-tab="order" data-i18n="tab_order">اطلب</button>
        </div>
      </div><!-- /modalTop -->


      <!-- ✅ MODAL BODY (SCROLL AREA) -->
      <div id="modalBody" class="modalBody">
        <div class="modalCols">

          <!-- LEFT -->
          <div class="modalLeft">
            <div class="modalImage">
              <img id="modalMainImg" src="" alt="" />
            </div>

            <div class="thumbs" id="modalThumbs"></div>

            <div class="modalShare">
              <button class="btn ghost" type="button" id="shareWaBtn" data-i18n="share_whatsapp">مشاركة واتساب</button>
              <button class="btn ghost" type="button" id="copyLinkBtn" data-i18n="copy_link">نسخ الرابط</button>
              <button class="btn ghost" type="button" id="favBtn">♡</button>
            </div>
          </div>

          <!-- RIGHT -->
          <div class="modalRight">

            <section data-modal-panel="details">
              <p class="modalDesc" id="modalDesc">—</p>
            </section>

            <section data-modal-panel="order" style="display:none;">
              <div class="formBlock">
                <div class="formTitle" data-i18n="customer_data">بيانات الزبون</div>

                <div class="formGrid">
                  <div class="field">
                    <label data-i18n="full_name">الاسم الكامل</label>
                    <input id="orderName" type="text" placeholder="مثال: طارق محمد علي" />
                  </div>

                  <div class="field">
                    <label data-i18n="phone">رقم الهاتف</label>
                    <input id="orderPhone" type="tel" placeholder="+964 77xxxxxxx" />
                  </div>

                  <div class="field">
                    <label data-i18n="governorate">المحافظة</label>
                    <input id="orderGov" type="text" placeholder="مثال: بغداد" />
                  </div>

                  <div class="field">
                    <label data-i18n="area">المنطقة</label>
                    <input id="orderArea" type="text" placeholder="مثال: أبو نؤاس" />
                  </div>

                  <div class="field full">
                    <label data-i18n="nearest_landmark">أقرب نقطة دالة (اختياري)</label>
                    <input id="orderLandmark" type="text" placeholder="قرب مجمع كورنيش أبو نؤاس" />
                  </div>

                  <div class="field full">
                    <label data-i18n="notes_optional">ملاحظات (اختياري)</label>
                    <textarea id="orderNotes" rows="3" placeholder="مثال: أريد معاينة القطعة..."></textarea>
                  </div>
                </div>

                <div class="formActions">
                  <button class="btn primary" type="button" id="orderWhatsApp">ارسال الطلب</button>
                  <button class="btn ghost" type="button" id="copyOrder">نسخ تفاصيل الطلب</button>
                </div>
              </div>
            </section>

          </div><!-- /modalRight -->

        </div><!-- /modalCols -->
      </div><!-- /modalBody -->

    </div><!-- /modalDialog -->
  </div><!-- /modal -->


  <script src="i18n.js"></script>
  <script src="products.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="script.js" defer></script>
</body>
</html>
